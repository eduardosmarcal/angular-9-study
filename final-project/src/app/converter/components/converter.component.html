<h1 class="my-3">Currency Converter</h1>

<div class="alert alert-danger" role="alert" *ngIf="hasError">
  Fail to get data. Please try again.
</div>

<div class="card">
  <div class="card-header">
    <fa-icon [icon]="faSync" class="mr-1"></fa-icon>
    Choose a currency to convert
  </div>
  <div class="card-body d-flex justify-content-center">
    <form #converterForm="ngForm">
      <div class="form-row">
        <div class="col-auto">
          <label class="sr-only" for="amount">Amount</label>
          <input
            name="amount"
            type="text"
            id="amount"
            class="form-control text-right"
            placeholder="0.00"
            required
            [(ngModel)]="converter.amount"
            numberDirective
          >
        </div>
        <div class="col-auto">
          <label class="sr-only" for="currencyFrom">Currency From</label>
          <select
            name="currencyFrom"
            class="form-control"
            id="currencyFrom"
            required
            [(ngModel)]="converter.currencyFrom"
          >
            <option
              *ngFor="let currency of euroCurrency"
              [value]="currency.symbol"
            >
              {{currency.symbol}} - {{currency.description}}
            </option>
          </select>
        </div>
        <div class="col-auto icon-lg">
          <fa-icon [icon]="faArrowRight"></fa-icon>
        </div>
        <div class="col-auto">
          <label class="sr-only" for="currencyTo">Currency To</label>
          <select
            name="currencyTo"
            class="form-control"
            id="currencyTo"
            required
            [(ngModel)]="converter.currencyTo"
          >
            <option
              *ngFor="let currency of currencies"
              [value]="currency.symbol"
            >
              {{currency.symbol}} - {{currency.description}}
            </option>
          </select>
        </div>
        <div class="col-auto">
          <button
            type="submit"
            class="btn"
            data-toggle="modal"
            data-target="#modalRate"
            [ngClass]="{
              'btn-primary': converterForm.form.valid,
              'btn-secondary': !converterForm.form.valid
            }"
            (click)="convert()"
            [disabled]="!converterForm.form.valid"
          >
            Convert
          </button>
        </div>
      </div>
      <div class="form-row mt-3">
        <div class="col-auto text-info">
          <small>
            This project was adapted to work with the FREE version of Fixer API. That's why it's only possible to convert from Euro.
          </small>
        </div>
      </div>
    </form>
  </div>
</div>

<modal-converter
  [id]="'modalRate'"
  [converterResponse]="converterResponse"
  [converter]="converter"
  (onConfirm)="init()"
></modal-converter>
